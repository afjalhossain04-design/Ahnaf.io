<script>
    // This is "ahnaf09" encoded so it's not plain text
    const AUTH_KEY = "YWhuYWYwOQ=="; 

    function login() {
        let pass = prompt("Verification Required:");
        if(!pass) return;
        
        // Simple, reliable encoding that works on all browsers
        const check = btoa(pass.trim());

        if(check === AUTH_KEY) {
            document.getElementById('admin-panel').style.display = 'block';
            // Visual feedback: Logo turns Blue when Admin is active
            document.querySelector('.logo').style.color = '#00D1FF'; 
            document.querySelector('.logo').style.textShadow = '0 0 15px #00D1FF';
            alert("Identity Verified. Welcome Ahnaf.");
        } else {
            alert("Access Denied: Incorrect Password.");
        }
    }

    function logout() { 
        document.getElementById('admin-panel').style.display = 'none'; 
        document.querySelector('.logo').style.color = '#FF2D7D'; 
        document.querySelector('.logo').style.textShadow = '0 0 10px #FF2D7D';
        document.getElementById('main-body').classList.remove('delete-mode-active');
    }

    function toggleDeleteMode() {
        const body = document.getElementById('main-body');
        body.classList.toggle('delete-mode-active');
        let btn = document.getElementById('delete-btn');
        let isActive = body.classList.contains('delete-mode-active');
        
        btn.style.background = isActive ? '#ff0000' : '#333';
        btn.innerHTML = isActive ? 
            '<i class="fa-solid fa-circle-check"></i> Exit Removal Mode' : 
            '<i class="fa-solid fa-trash"></i> Toggle Removal Mode';
    }

    function extractID(url) {
        let match = url.match(/(?:youtu\.be\/|youtube\.com\/(?:.*v=|\/v\/|embed\/|shorts\/))([^?&"'>]+)/);
        return (match && match[1].length == 11) ? match[1] : null;
    }

    function addVideo() {
        let url = document.getElementById('vid-url').value;
        let title = document.getElementById('vid-title').value;
        let id = extractID(url);
        let timestamp = Date.now();

        if(id && title) {
            let grid = document.getElementById('video-archive');
            let div = document.createElement('div');
            div.className = 'video-card';
            div.id = 'vid-' + timestamp;
            div.innerHTML = `
                <div class="remove-overlay" onclick="removeVideo('vid-${timestamp}')">
                    <i class="fa-solid fa-trash-can"></i>
                    <p style="font-size:10px; font-weight:bold; margin-top:5px;">REMOVE</p>
                </div>
                <a href="${url}" target="_blank">
                    <div class="thumb"><img src="https://img.youtube.com/vi/${id}/maxresdefault.jpg"></div>
                    <div class="info"><h4>${title}</h4></div>
                </a>`;
            grid.prepend(div);
            document.getElementById('vid-url').value = '';
            document.getElementById('vid-title').value = '';
        } else {
            alert("Invalid YouTube Link.");
        }
    }

    function removeVideo(id) {
        if(confirm("Permanently remove this video from the current view?")) {
            const el = document.getElementById(id);
            el.style.opacity = '0';
            el.style.transform = 'scale(0.5)';
            setTimeout(() => el.remove(), 300);
        }
    }

    // PARTICLE ENGINE
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function init() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        particles = [];
        for (let i = 0; i < 100; i++) {
            particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, sx: (Math.random()-0.5)*1, sy: (Math.random()-0.5)*1 });
        }
    }
    function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p => {
            p.x+=p.sx; p.y+=p.sy;
            if(p.x<0||p.x>canvas.width) p.sx*=-1; if(p.y<0||p.y>canvas.height) p.sy*=-1;
            ctx.fillStyle = 'rgba(255,45,125,0.4)';
            ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    window.addEventListener('resize', init);
    init(); animate();
</script>
